"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var s=window.location,e=l(document),r="qor.filter",t="enable."+r,i="click."+r,c=".qor-filter__dropdown",a='[name="QorResource.PublishReady"]';function o(t,e){this.$element=l(t),this.options=l.extend({},o.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return o.prototype={constructor:o,init:function(){this.bind();var t=this.$element;this.$scheduleTime=t.find(".qor-filter__scheduled-time"),this.$searchButton=t.find(this.options.button),this.$trigger=t.find(this.options.trigger),this.publishReadyOff=l("#qor-publishready__off").data().label},bind:function(){var t=this.options;this.$element.on(i,t.trigger,this.show.bind(this)).on(i,t.clear,this.clear.bind(this)).on(i,t.button,this.search.bind(this)),e.on(i,this.close)},unbind:function(){var t=this.options;this.$element.off(i,t.trigger,this.show.bind(this)).off(i,t.clear,this.clear.bind(this)).off(i,t.button,this.search.bind(this))},show:function(){this.$element.find(c).toggle()},close:function(t){var e=l(t.target),i=l(c),n=i.is(":visible"),r=e.closest(c).length,o=e.closest(".qor-filter-toggle").length,a=e.closest(".qor-modal").length,s=e.closest(".ui-timepicker-wrapper").length;n&&(r||o||a||s)||i.hide()},clear:function(t){var e=l(t.target),i=this.$trigger,n=i.find(".qor-selector-label"),r=i.find(".qor-publishready-label");return e.data().type?(r.html("").parent().hide(),l(a).prop("checked",!1)):(n.parent().hide(),this.$scheduleTime.val("")),e.remove(),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=s.search;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,i){var n=i||s.href,r=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+r+"=.*?(&|$)","i"),a=-1!==n.indexOf("?")?"&":"?";return n.match(o)?n.replace(o,"$1"+t+"="+e+"$2"):n+a+t+"="+e},search:function(){var r,t=this.$element.find("[data-search-param]"),o=this;t.length&&(t.each(function(){var t=l(this),e=t.data().searchParam,i=t.find(a).is(":checked"),n=t.val();"publish_draft_content"==e&&(n=i?"true":""),r=o.updateQueryStringParameter(e,n,r)}),window.location.href=r)},destroy:function(){this.unbind(),this.$element.removeData(r)}},o.DEFAULTS={trigger:!1,button:!1,clear:!1},o.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(r);if(!i){if(/destroy/.test(n))return;e.data(r,i=new o(this,n))}"string"==typeof n&&l.isFunction(t=i[n])&&t.apply(i)})},l(function(){var e='[data-toggle="qor.filter.time"]',i={trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};l(document).on("disable.qor.filter",function(t){o.plugin.call(l(e,t.target),"destroy")}).on(t,function(t){o.plugin.call(l(e,t.target),i)}).triggerHandler(t)}),o});