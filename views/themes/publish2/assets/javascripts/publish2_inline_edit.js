"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(i,n){this.$element=t(i),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.init()}var i=window.location,n=t(document),r="qor.filter",o="enable."+r,a="disable."+r,s="click."+r,l=".qor-filter__scheduled-time",c="[data-search-param]",h=".qor-filter__dropdown",u=".qor-filter-toggle",f="publish_draft_content",d='[name="QorResource.PublishReady"]';return e.prototype={constructor:e,init:function(){this.bind();var e=this.$element;this.$scheduleTime=e.find(l),this.$searchButton=e.find(this.options.button),this.$trigger=e.find(this.options.trigger),this.publishReadyOff=t("#qor-publishready__off").data().label},bind:function(){var t=this.options;this.$element.on(s,t.trigger,this.show.bind(this)).on(s,t.clear,this.clear.bind(this)).on(s,t.button,this.search.bind(this)),n.on(s,this.close)},unbind:function(){var t=this.options;this.$element.off(s,t.trigger,this.show.bind(this)).off(s,t.clear,this.clear.bind(this)).off(s,t.button,this.search.bind(this))},show:function(){this.$element.find(h).toggle()},close:function(e){var i=t(e.target),n=t(h),r=n.is(":visible"),o=i.closest(h).length,a=i.closest(u).length,s=i.closest(".qor-modal").length,l=i.closest(".ui-timepicker-wrapper").length;r&&(o||a||s||l)||n.hide()},clear:function(e){var i=t(e.target),n=this.$trigger,r=n.find(".qor-selector-label"),o=n.find(".qor-publishready-label");return i.data().type?(o.html("").parent().hide(),t(d).prop("checked",!1)):(r.parent().hide(),this.$scheduleTime.val("")),i.remove(),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=i.search;t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=n.exec(e);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},updateQueryStringParameter:function(t,e,n){var r=n||i.href,o=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),a=new RegExp("([?&])"+o+"=.*?(&|$)","i"),s=r.indexOf("?")!==-1?"&":"?";return r.match(a)?r.replace(a,"$1"+t+"="+e+"$2"):r+s+t+"="+e},search:function(){var e,i=this.$element.find(c),n=this;i.length&&(i.each(function(){var i=t(this),r=i.data().searchParam,o=i.find(d).is(":checked"),a=i.val();r==f&&(a=o?"true":""),e=n.updateQueryStringParameter(r,a,e)}),window.location.href=e)},destroy:function(){this.unbind(),this.$element.removeData(r)}},e.DEFAULTS={trigger:!1,button:!1,clear:!1},e.plugin=function(i){return this.each(function(){var n,o=t(this),a=o.data(r);if(!a){if(/destroy/.test(i))return;o.data(r,a=new e(this,i))}"string"==typeof i&&t.isFunction(n=a[i])&&n.apply(a)})},t(function(){var i='[data-toggle="qor.filter.time"]',n={trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};t(document).on(a,function(n){e.plugin.call(t(i,n.target),"destroy")}).on(o,function(r){e.plugin.call(t(i,r.target),n)}).triggerHandler(o)}),e});